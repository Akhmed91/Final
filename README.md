# yamdb_final
yamdb_final
**Build status**

![workflow](https://github.com/Akhmed91/foodgram-project-react/actions/workflows/foodgram_workflow.yml/badge.svg)
 api_final

В этом учебном проекте **"API для YaMDb"** создан *REST API - сервис* для проекта Yatube на основе классов предоставляемых библиотекой **Django REST Framework**.
Проект **YaMDb** собирает отзывы пользователей на различные произведения.
Аутентификация выпоняется по **JWT-токену**.

# шаблон наполнения env-файла
```
# указываем, что работаем с postgresql
DB_ENGINE=django.db.backends.postgresql
# имя базы данных
DB_NAME=postgres
# логин для подключения к базе данных
POSTGRES_USER=postgres
# пароль для подключения к БД (установите свой)
POSTGRES_PASSWORD=postgres
# название сервиса (контейнера)
DB_HOST=db
# порт для подключения к БД
DB_PORT=5432
```

## Войдите на свой удаленный сервер в облаке.
### Остановите службу nginx:
''' sudo systemctl stop nginx '''

## Установите docker:
'''sudo apt install docker.io '''

## Как запустить проект:
### Установите Docker, а вместе с ним Docker Compose
'''sudo apt install docker-ce docker-compose -y'''

### Запустите docker-compose
'''docker-compose up'''

### Пересоберать контейнеры и запустить их
'''docker-compose up -d --build'''

### остановка контейнера
'''docker-compose stop'''

### выполнить миграции, создать суперпользователя и собрать статику
'''docker-compose exec backend python manage.py migrate'''
'''docker-compose exec backend python manage.py createsuperuser'''
'''docker-compose exec backend python manage.py collectstatic --no-input'''

### Алгоритм регистрации пользователей
1. Пользователь отправляет POST-запрос на добавление нового пользователя с параметрами email и username на эндпоинт ```/api/users/```.
2. YaMDB отправляет письмо с кодом подтверждения (confirmation_code) на адрес email.
3. Пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт ```/api/auth/token/login/```, в ответе на запрос ему приходит token (JWT-токен).
4. При желании пользователь отправляет PATCH-запрос на эндпоинт ```/api/users/me/``` и заполняет поля в своём профайле (описание полей — в документации).

### Пользовательские роли

- Аноним — может просматривать описания произведений, читать отзывы и комментарии.
- Аутентифицированный пользователь (user) — может, как и Аноним, читать всё, дополнительно он может публиковать отзывы и ставить оценку произведениям (фильмам/книгам/песенкам), может комментировать чужие отзывы; может редактировать и удалять свои отзывы и комментарии. Эта роль присваивается по умолчанию каждому новому пользователю.
- Администратор (admin) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.
- Суперюзер Django — обладет правами администратора (admin)


Проект Foodgram позволяет пользователям публиковать рецепты, добавлять рецепты в избранное и список покупок,
подписыватся на других пользователей и скачивать список продуктов.

## Начало работы

Клонируйте репозиторий на локальную машину и перейдите в созданную папку.
```
git clone https://github.com/Akhmed91//foodgram-project-react.git && cd foodgram-project-react/
```

### Подготовка развертывания приложения

Для работы с проектом в контейнерах должен быть установлен Docker и docker-compose.


Проект запущен и доступен по [адресу](https://foodgramtube.hopto.org/)